# Section 0: System Architecture & Master Context (STRICT)

**Project:** ALTAIR Hexacopter Control System
**Type:** Voliro-type (Fully Actuated 12-DOF)
**Goal:** Develop a distributed control system for the ALTAIR drone.

## 0.1 Directory Structure (Root: `~/altair_project/`)
All code must assume this relative path structure.
* `software/`
    * `common/` (Shared resources)
        * `altair_description/` (URDF package)
    * `pico_firmware/` (Node A)
    * `RPi4_1_ws/` (Node B workspace)
    * `RPi4_2_ws/` (Node C workspace)
    * `gcs_tools_ws/` (**Target for this task**)
        * `src/`

## 0.2 Node Roles & Hardware
* **Node A, B, C:** (Embedded Flight System)
* **Node GCS: PC (Monitor)** [Target]
    * **Role:** Human Interface, Debugging, Visualization.
    * **OS:** Ubuntu 22.04 or Windows (WSL2).

## 0.3 ROS 2 Interface Specifications & QoS
**QoS Policy:** "SensorData" = Best Effort.

| Topic Name | From | To | Type | Size | QoS | Notes |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| `/control/actuator_commands` | Node C | Node B | `Float32MultiArray` | 12 | SensorData | Monitor |
| `/control/manual_override` | GCS | Node B | `Float32MultiArray` | 12 | Reliable | Maintenance |
| `/pico/esc_telemetry` | Node A | Node B | `Float32MultiArray` | 6 | SensorData | Monitor |
| `/odometry/filtered` | Node B | Node C | `nav_msgs/Odometry` | - | SensorData | Monitor |
| `/cmd_vel` | GCS | Node C | `geometry_msgs/Twist` | - | Reliable | Stick Input |

---

# Section 1: Task Description (GCS)

**Objective:** Generate the **ROS 2 Python Packages** for the **Ground Control Station** inside `software/gcs_tools_ws/src/`.

**Specific Requirements:**

1.  **Package: `altair_gcs_gui` (PyQt5 + rclpy)**
    * **Tab 1: Flight Control**
        * Integrate `joy` node inputs. Map Gamepad axes to `/cmd_vel` (Twist).
        * Visual indicators for Stick positions, Battery (from telemetry), and Drone Position.
    * **Tab 2: Maintenance (The "Override" Feature)**
        * **Toggle:** "Enable Manual Override". When Active, start publishing `/control/manual_override`.
        * **Controls:** 12 individual sliders (6 Motors, 6 Servos).
        * **Feedback:** Show real-time RPM bars next to each Motor slider (Sub to `/pico/esc_telemetry`).
        * **Mux Logic:** This node acts as the source for the "Maintenance" signal defined in Node B's safety mux.

2.  **Package: `system_monitor`**
    * **Bus Watchdog:**
        * Subscribe to `/pico/imu_raw` and `/control/actuator_commands`.
        * Calculate and display the **Hz (Frequency)** of these topics in real-time.
        * **Alert:** If Frequency drops below threshold (e.g., IMU < 380Hz), flash a warning.

3.  **Visualization:**
    * Create a launch file `gcs.launch.py`.
    * It should launch:
        * `joy_node`.
        * `altair_gcs_gui`.
        * `rviz2`.
    * **RViz Config:** Pre-configure RViz to load `altair.urdf` from `software/common/altair_description` and visualize `/odometry/filtered`.