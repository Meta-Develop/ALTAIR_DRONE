# rp2350.cfg - OpenOCD Config for RP2350 (RISC-V/ARM Mode auto-detected)
# For now, we assume standard SWD via CMSIS-DAP (Pico Probe)

transport select swd

source [find target/swj-dp.tcl]

# RP2350 ID (ARM Cortex-M33)
# Note: Early silicon might differ, using standard ID
if { [info exists CPUTAPID] } {
   set _CPUTAPID $CPUTAPID
} else {
   set _CPUTAPID 0x00040000 
   # Or 0x00000001 for RISC-V?
   # Let's try to be generic or find exact ID.
   # Safe bet: Auto-detect (don't specify TAPID overly strict)
}

# Define Target
swj_newdap rp2350 cpu -irlen 4 -ignore-version

target create rp2350.core0 cortex_m -dap rp2350.cpu

# Force RP2040 Flash Driver (Best Effort for RP2350)
flash bank rp2350.flash rp2040_flash 0x10000000 0 0 0 rp2350.core0

adapter speed 5000
